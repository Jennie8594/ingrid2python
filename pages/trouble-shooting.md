---
title: Ingrid2Python
---

## Troubleshooting

- Read the pink error messages, starting at the end
- These error messages are generated by the open-source code. They were added in by the programmer to be helpful
- Search the web, someone else has almost always asked the question before!
- \<Tab\> and \<Shift\>\<Tab\> give contextual help in a Jupyter Notebook

<details> <summary><b>Time Grids</b></summary> <p>  
  
If your dataset, `ds`, is giving trouble with the time grid, `time`,  (as happens frequently), just replace it by a `datetime64` time grid.
  
So here is my crude recipe to replace troublesome time grids with time-centered `datetime64`. Note that there are many variations of frequencies, so please check your time grid after replacement and adjust the recipe accordingly.
  
```
# Replace native time grid by new grid, centered in time
ds=xr.open_dataset('test.nc').resample(time='A').mean()

freq = xr.infer_freq(ds.time)
print(freq)
time = ds['time'] = pd.date_range(str(ds.time.values[0]), periods=len(ds.time), freq=freq)
if 'D' in freq:
    ds['time'] = time.shift(12, freq='H') 
elif 'M' in freq:   
    ds['time'] = time.shift(15, freq='D') 
elif 'A' in freq:
    ds['time'] = time.shift(6, freq='M') 
ds.time  

```
</p> </details> 

<details> <summary><b>DataSets vs. DataArrays</b></summary> <p>  
  
- An `xarray DataSet` contains `xarray DataArrays`.  Each DataArray usually corresponds to what we think of as one variable. A good convention, so you remember which you are dealing with, is to call Datasets: `ds_{name}` and DataArrays: `da_{name}`. 
- You cannot plot a Dataset, only a DataArray. A pink error results: 
  
<p align="center"><img src="../assets/imgs/ValueError.png"></p>
  
- You can combine DataArrays in one Dataset
- You can convert a DataArray into a Dataset - if the DataArray doesn't know the name of the variable, you can specify it.
  
For our usual example:

    
```
url = 'http://kage.ldeo.columbia.edu:81/SOURCES/.LOCAL/.sst.mon.mean.nc/.sst/dods'
ds = xr.open_dataset(url)
da = ds.sst
ds_new = da.to_dataset(name='sst')
```
  
</p> </details> 


[//]: # (This is the beginning.)  

<details> <summary><b></b></summary> <p>  
    
```


```
  
</p> </details> 

[//]: # (This is the end.)  
